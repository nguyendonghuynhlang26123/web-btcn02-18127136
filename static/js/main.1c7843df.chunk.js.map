{"version":3,"sources":["common/utils.ts","components/Board/Board.tsx","components/Game/Author.tsx","components/Game/Game.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["allEqual","arr","length","every","v","getIndicesArr","isAsc","res","Array","fill","map","_","idx","reverse","generateArr","value","Board","boardState","onSquareClicked","width","height","winningMoves","Square","row","col","className","includes","onClick","temp2","tmp1","AuthorDetails","calculateWinner","board","boardWitdth","numToWin","temp","i","horizontalLine","offset","rowNumbers","Math","floor","verticalLine","diagonalLeft","diagonalRight","Game","useState","moveHistory","setMoveHistory","boardHistory","setBoardHistory","stepNumber","setStepNumber","isXTurn","setIsXTurn","winner","setWinner","setWinningMoves","isSortAsc","setSortAsc","setwidth","setNumToWin","resetBoard","htmlFor","type","min","max","onChange","ev","Number","target","prev","index","step","curWinner","jumpTo","newMoveHistory","slice","history","squares","xTurn","App","Fragment","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1c7843df.chunk.js","sourcesContent":["/**\n * Check if all elements in the array are equal to each other\n * @param arr\n * @returns {boolean}\n */\nexport const allEqual = (arr: any[]): boolean => {\n  if (arr.length === 0) return false;\n  return arr.every((v) => v === arr[0]);\n};\n\n/**\n * A helper function to generate an array of indices with length E.g: [0,1,2,3,4]\n * @param length Array length\n * @param isAsc indices order.\n * @returns return [0, 1, 2, ...] if isAsc == true, else returns [..., 2, 1, 0]\n */\nexport const getIndicesArr = (length: number, isAsc: boolean) => {\n  const res = Array(length)\n    .fill(null)\n    .map((_, idx) => idx);\n  return isAsc ? res : res.reverse();\n};\n\n/**\n * A helper function to generate an array with length E.g: [0,1,2,3,4]\n * @param length Array length\n * @param value Array init value, (default = null)\n * @returns return [value, value, value, ...]\n */\nexport const generateArr = (length: number, value: any = null) => {\n  return Array(length).fill(value);\n};\n","import React from 'react';\nimport { generateArr } from '../../common/utils';\nimport { BoardComponentPropsType, SquareComponentPropsType } from './type';\n\n/**\n * Board component of the game\n * @param {BoardComponentPropsType} props Props state. See {@link BoardComponentPropsType}\n * @returns {JSX.Element}\n */\nexport const Board = ({ boardState, onSquareClicked, width, height, winningMoves }: BoardComponentPropsType) => {\n  const checkSquareWinner = (idx: number): boolean => {\n    if (!winningMoves) return false;\n    if (winningMoves.includes(idx)) return true;\n    return false;\n  };\n\n  /**\n   * Square component\n   * @param squareProps See {@link SquareComponentPropsType}\n   * @returns {JSX.Element}\n   */\n  const Square = ({ row, col }: SquareComponentPropsType): JSX.Element => (\n    <button\n      className={`square ${checkSquareWinner(row * width + col) && 'win'} ${boardState[row * width + col]}`}\n      onClick={() => {\n        if (onSquareClicked) onSquareClicked(row * width + col);\n      }}\n    >\n      {boardState[row * width + col]}\n    </button>\n  );\n\n  return (\n    <div>\n      {generateArr(height).map((temp2, row) => (\n        <div key={row} className=\"board-row\">\n          {generateArr(width).map((tmp1, col) => (\n            <Square row={row} col={col} />\n          ))}\n        </div>\n      ))}\n    </div>\n  );\n};\n","import React from 'react';\n\nexport const AuthorDetails = () => (\n  <p className=\"details\">\n    <b>18127136 - Nguyen Dang Huynh Long</b>\n    <br />\n    BTCN02 - PTUDWNC - 18KTPM1\n  </p>\n);\n","import React, { useState } from 'react';\nimport { allEqual, getIndicesArr } from '../../common/utils';\nimport { SquareType, Board } from '../Board';\nimport { AuthorDetails } from './Author';\n\n/**\n * A helper function that calculate the winner by looping through the board (brute-force)\n * @dev Check winning condition of an element in 4 direction: | (vertical), â€” (horizontal),  / (diagnonal right) ,  \\ (diagonal left)\n * @param board  board state at the moment\n * @param boardWitdth width of the board\n * @param numToWin Number consecutive 'O' or 'X' to win the game\n * @returns {[SquareType, number[]]} returns the array: [winner, winningMoves]. Null if the game is not finished\n */\nconst calculateWinner = (board: SquareType[], boardWitdth: number, numToWin: number): [SquareType, number[]] | null => {\n  const temp = Array(numToWin).fill(null);\n  for (let i = 0; i < board.length; i++) {\n    if (!board[i]) continue;\n    // Check in Horizontal direction: [i, i+1, i+2, i+3, ...] AND they are on the same row\n    const horizontalLine = temp.map((_, offset) => board[i + offset]);\n    const rowNumbers = temp.map((_, offset) => Math.floor((i + offset) / boardWitdth));\n    if (allEqual(rowNumbers) && allEqual(horizontalLine)) return [horizontalLine[0], temp.map((_, offset) => i + offset)];\n\n    // Check in Vertical direction: [i, i+1*width, i+2*width, i+3*width, ...]\n    const verticalLine = temp.map((_, offset) => board[i + offset * boardWitdth]);\n    if (allEqual(verticalLine)) return [verticalLine[0], temp.map((_, offset) => i + offset * boardWitdth)];\n\n    // Check in Left diagon direction (\"\\\"): [i, i+1*(width+1), i+2*(width+1), i+3*(width+1), ...]\n    const diagonalLeft = temp.map((_, offset) => board[i + offset * (boardWitdth + 1)]);\n    if (allEqual(diagonalLeft)) return [diagonalLeft[0], temp.map((_, offset) => i + offset * (boardWitdth + 1))];\n\n    // Check in Right diagon direction (\"/\"): [i, i+1*(width-1), i+2*(width-1), i+3*(width-1), ...] AND if they can form \"/\" direction\n    const diagonalRight = temp.map((_, offset) => board[i + offset * (boardWitdth - 1)]);\n    if (i % boardWitdth >= numToWin - 1 && allEqual(diagonalRight)) return [diagonalRight[0], temp.map((_, offset) => i + offset * (boardWitdth - 1))];\n  }\n  return null;\n};\n\n// Move type\ntype MoveHistory = { row: number; col: number } | null;\n\nexport const Game = () => {\n  const [moveHistory, setMoveHistory] = useState<MoveHistory[]>([null]);\n  const [boardHistory, setBoardHistory] = useState<SquareType[][]>([Array(9).fill(null)]);\n  const [stepNumber, setStepNumber] = useState<number>(0);\n  const [isXTurn, setIsXTurn] = useState<boolean>(true);\n  const [winner, setWinner] = useState<SquareType>(null);\n  const [winningMoves, setWinningMoves] = useState<number[] | null>(null);\n  const [isSortAsc, setSortAsc] = useState<boolean>(true);\n\n  //EXTENSION:\n  const [width, setwidth] = useState<number>(5);\n  const [numToWin, setNumToWin] = useState<number>(5);\n\n  /**\n   * A callback whenever a player click on an square\n   * @param i square index in the boardState\n   */\n  const handleClick = (i: number): void => {\n    const newMoveHistory = moveHistory.slice(0, stepNumber + 1);\n    const history = boardHistory.slice(0, stepNumber + 1);\n    const squares = history[history.length - 1].slice();\n\n    if (squares[i] || winner) return;\n    squares[i] = isXTurn ? 'X' : 'O';\n\n    const curWinner = calculateWinner(squares, width, numToWin);\n    if (curWinner) {\n      setWinner(curWinner[0]);\n      setWinningMoves(curWinner[1]);\n    }\n\n    setMoveHistory([...newMoveHistory, { row: Math.floor(i / width), col: i % width }]);\n    setBoardHistory([...history, [...squares]]);\n    setStepNumber(history.length);\n    setIsXTurn((xTurn) => !xTurn);\n  };\n\n  /**\n   * Jump to step number\n   * @param step Targeted step\n   */\n  const jumpTo = (step: number): void => {\n    setStepNumber(step);\n    setIsXTurn(step % 2 === 0);\n    const curWinner = calculateWinner(boardHistory[step], width, numToWin);\n    if (curWinner) {\n      setWinner(curWinner[0]);\n      setWinningMoves(curWinner[1]);\n    } else {\n      setWinner(null);\n      setWinningMoves(null);\n    }\n  };\n\n  /**\n   * Reset the board state to the initial state\n   */\n  const resetBoard = () => {\n    setMoveHistory([null]);\n    setBoardHistory([Array(9).fill(null)]);\n    setStepNumber(0);\n    setIsXTurn(true);\n    setWinner(null);\n    setWinningMoves(null);\n    setSortAsc(true);\n  };\n\n  /**\n   * Render status text depending on internal state\n   * @dev If the winner has been decided => return status text with the winner\n   *      If the stepNumber reach maximum => Draw\n   *      Otherwise return whose turn is next\n   * @returns {JSX.Element}\n   */\n  const statusText = (): JSX.Element => {\n    if (winner) return <p className={`status ${winner}`}>Winner: {winner}</p>;\n    if (stepNumber === width * width) return <p className=\"status\">DRAW!</p>;\n    return <p className={`status ${isXTurn ? 'X' : 'O'}`}>Next player: {isXTurn ? 'X' : 'O'}</p>;\n  };\n\n  return (\n    <div className=\"game\">\n      <div className=\"game-info\">\n        <AuthorDetails />\n        <div className=\"config\">\n          <label htmlFor=\"gamesize\">\n            Board: ({width}x{width})\n          </label>\n          <input\n            type=\"range\"\n            min=\"3\"\n            max=\"25\"\n            value={width}\n            onChange={(ev) => {\n              const value = Number(ev.target.value);\n              setwidth(value);\n              if (value < numToWin) setNumToWin(value);\n              resetBoard();\n            }}\n          />\n        </div>\n        <div className=\"config\">\n          <label htmlFor=\"gamesize\">Moves to win: {numToWin} </label>\n          <input\n            type=\"range\"\n            min=\"3\"\n            max={width > 5 ? 5 : width}\n            value={numToWin}\n            onChange={(ev) => {\n              setNumToWin(Number(ev.target.value));\n              resetBoard();\n            }}\n          />\n        </div>\n\n        <button onClick={() => setSortAsc((prev) => !prev)}>Sort: {isSortAsc ? 'DESC' : 'ASC'}</button>\n        <button onClick={() => resetBoard()}>Reset</button>\n        <ol>\n          {getIndicesArr(moveHistory.length, isSortAsc) /** [1,2,3,4...] if isAsc==true */\n            .map((index) => {\n              return (\n                <li key={index}>\n                  <button className={`move-history ${index % 2 === 0 ? 'X' : 'O'} ${index === stepNumber && 'active'}`} onClick={() => jumpTo(index)}>\n                    {index === 0 ? 'Go to game start' : `Go to move #${index} (col: ${moveHistory[index]?.col}, row: ${moveHistory[index]?.row})`}\n                  </button>\n                </li>\n              );\n            })}\n        </ol>\n      </div>\n\n      <div className=\"game-board\">\n        {statusText()}\n        <Board boardState={boardHistory[stepNumber]} width={width} height={width} onSquareClicked={handleClick} winningMoves={winningMoves} />\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport './assets/styles/index.css';\nimport { Game } from './components';\n\nconst App = () => {\n  return (\n    <React.Fragment>\n      <Game />\n    </React.Fragment>\n  );\n};\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}